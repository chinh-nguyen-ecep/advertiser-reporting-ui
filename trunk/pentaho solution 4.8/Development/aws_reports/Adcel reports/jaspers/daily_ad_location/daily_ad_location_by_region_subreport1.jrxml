<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="daily_ad_location_by_metro_subreport1" language="groovy" pageWidth="1190" pageHeight="842" orientation="Landscape" columnWidth="1190" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
	<property name="ireport.zoom" value="1.5"/>
	<property name="ireport.x" value="294"/>
	<property name="ireport.y" value="0"/>
	<parameter name="eastern_date_sk" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[SELECT full_date,
       partner_id, partner_name,  parent1_id, parent1_name,
       country_alpha2,  region_name,
       postal_code, trxids_count, fullfilled_code_count, fullfilled_code_y,
       fullfilled_code_n, fullfilled_code_e, fullfilled_code_t
FROM adstraffic.daily_location_stats_by_region
WHERE is_active=true AND eastern_date_sk=$P{eastern_date_sk}
ORDER BY partner_name]]>
	</queryString>
	<field name="full_date" class="java.sql.Date"/>
	<field name="partner_id" class="java.lang.Integer"/>
	<field name="partner_name" class="java.lang.String"/>
	<field name="parent1_id" class="java.lang.Integer"/>
	<field name="parent1_name" class="java.lang.String"/>
	<field name="country_alpha2" class="java.lang.String"/>
	<field name="region_name" class="java.lang.String"/>
	<field name="postal_code" class="java.lang.String"/>
	<field name="trxids_count" class="java.lang.Integer"/>
	<field name="fullfilled_code_count" class="java.lang.Integer"/>
	<field name="fullfilled_code_y" class="java.lang.Integer"/>
	<field name="fullfilled_code_n" class="java.lang.Integer"/>
	<field name="fullfilled_code_e" class="java.lang.Integer"/>
	<field name="fullfilled_code_t" class="java.lang.Integer"/>
	<variable name="Total Ad Requests" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{trxids_count}]]></variableExpression>
	</variable>
	<variable name="Total Ad Responses" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{fullfilled_code_count}]]></variableExpression>
	</variable>
	<variable name="Yes Ad Responses" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{fullfilled_code_y}]]></variableExpression>
	</variable>
	<variable name="No Ad Responses" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{fullfilled_code_n}]]></variableExpression>
	</variable>
	<variable name="Error Ad Response" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{fullfilled_code_e}]]></variableExpression>
	</variable>
	<variable name="Timeout Ad Response" class="java.lang.Integer" calculation="Sum">
		<variableExpression><![CDATA[$F{fullfilled_code_t}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<columnHeader>
		<band height="64" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="34" width="100" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Full Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="100" y="34" width="169" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Partner(ID)]]></text>
			</staticText>
			<staticText>
				<reportElement x="269" y="34" width="100" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Group(ID)]]></text>
			</staticText>
			<staticText>
				<reportElement x="580" y="34" width="100" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Ad Requests]]></text>
			</staticText>
			<staticText>
				<reportElement x="445" y="34" width="77" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Region Name]]></text>
			</staticText>
			<staticText>
				<reportElement x="522" y="34" width="58" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Zip Code]]></text>
			</staticText>
			<staticText>
				<reportElement x="780" y="34" width="100" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Yes Ad Responses]]></text>
			</staticText>
			<staticText>
				<reportElement x="680" y="34" width="100" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Total Ad Responses]]></text>
			</staticText>
			<staticText>
				<reportElement x="880" y="34" width="100" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[No Ad Responses]]></text>
			</staticText>
			<staticText>
				<reportElement x="980" y="34" width="100" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Error Ad Response]]></text>
			</staticText>
			<staticText>
				<reportElement x="1080" y="34" width="110" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Timeout Ad Response]]></text>
			</staticText>
			<staticText>
				<reportElement x="369" y="34" width="76" height="20"/>
				<textElement verticalAlignment="Top">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Country Alpha]]></text>
			</staticText>
			<line>
				<reportElement x="0" y="59" width="1190" height="1"/>
				<graphicElement>
					<pen lineWidth="1.5"/>
				</graphicElement>
			</line>
			<staticText>
				<reportElement x="0" y="0" width="100" height="20"/>
				<textElement>
					<font fontName="Arial" size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[Detail]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="100" height="20"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{full_date}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="100" y="0" width="169" height="20"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{partner_name}+"("+$F{partner_id}+")"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="269" y="0" width="100" height="20"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{parent1_name}+"("+$F{parent1_id}+")"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="580" y="0" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{trxids_count}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="445" y="0" width="77" height="20"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{region_name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="522" y="0" width="58" height="20"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{postal_code}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="780" y="0" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{fullfilled_code_y}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="680" y="0" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{fullfilled_code_count}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="880" y="0" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{fullfilled_code_n}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="980" y="0" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{fullfilled_code_e}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1080" y="0" width="110" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{fullfilled_code_t}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="369" y="0" width="76" height="20"/>
				<textElement>
					<font fontName="Arial"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{country_alpha2}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="81" splitType="Stretch">
			<line>
				<reportElement x="0" y="6" width="1190" height="1"/>
				<graphicElement>
					<pen lineWidth="1.0"/>
				</graphicElement>
			</line>
			<textField>
				<reportElement x="580" y="7" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{Total Ad Requests}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="680" y="7" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{Total Ad Responses}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="780" y="7" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{Yes Ad Responses}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="880" y="7" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{No Ad Responses}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="980" y="7" width="100" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{Error Ad Response}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="1080" y="7" width="110" height="20"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$V{Timeout Ad Response}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
