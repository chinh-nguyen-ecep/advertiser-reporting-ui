<script type="text/javascript">
		
			/**
			 * Visualize an HTML table using Highcharts. The top (horizontal) header 
			 * is used for series names, and the left (vertical) header is used 
			 * for category names. This function is based on jQuery.
			 * @param {Object} table The reference to the HTML table to visualize
			 * @param {Object} options Highcharts options
			 */
			var {chartName};
			Highcharts.visualize = function(table, options) {
				// the categories
				options.xAxis.categories = [];
				$('tbody th', table).each( function(i) {
					options.xAxis.categories.push(this.innerHTML);
				});
				
				// the data series
				options.series = [];
				$('tr', table).each( function(i) {
					var tr = this;
					$('th, td', tr).each( function(j) {
						if (j > 0) { // skip first column
							if (i == 0) { // get the name and init the series
								options.series[j - 1] = { 
									name: this.innerHTML,
									data: []
								};
							} else { // add values
								options.series[j - 1].data.push(parseFloat(this.innerHTML));
							}
						}
					});
				});
				
				{chartName} = new Highcharts.Chart(options);
			}
				
			// On document ready, call visualize on the datatable.
			$(document).ready(function() {			
				var table = document.getElementById('{chartName}_datatable'),
				options = {
					   chart: {
							renderTo: '{chartName}_container',
							backgroundColor: 'none',
							defaultSeriesType:'{chart_type}',
							zoomType: 'xy',
							polar: {p_chart_polar}
						},
						credits:{
							text: 'Vervemobile.com',
							href: 'http://www.vervemobile.com/'
						},
						title: {
							text: ' {v_chart_title} '
						},
						subtitle: {
							text: ' {v_chart_sub_title}'
						},
						tooltip: {
							backgroundColor: {
								linearGradient: [0, 0, 0, 60],
								stops: [
									[0, '#FFFFFF'],
									[1, '#E0E0E0']
								]
							},
							borderWidth: 1,
							borderColor: '#AAA'
						},
						legend: {
							layout: 'vertical',
							backgroundColor: '#FFFFFF',
							align: 'right',
							verticalAlign: 'top',
							x: -20,
							y: 70,
							floating: false,
							shadow: true
						},
						plotOptions: {
						bar: {
							dataLabels: {
								enabled: true
							}
						},
						column: {
							dataLabels: {
								enabled: true
							}
						}
					},

						xAxis: {
							type: 'date',
							dateTimeLabelFormats: {
								day: '%y-%m-%e'                
							}
						},
					   yAxis: {
					      title: {
					         text: 'Unit Count'
					      }
					   },
					   tooltip: {
					      formatter: function() {
					         return '<b>'+ this.series.name +'</b><br/>'+
					            this.y +' '+ this.x.toLowerCase();
					      }
					   }
					};
				
			      					
				Highcharts.visualize(table, options);
			});	
		</script>
<div class="chartBackground" style="">
<div id="{chartName}_container"></div>
</div>
<img style="display:none;cursor: pointer;float: right;margin-bottom: -10px;" title="Export CSV" src="/verve-lib/images/document_excel_csv.png"  onclick="exportData('#{chartName}_datatable')"/>
{HTMLTable}